<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
	</body>
	<script>
		function timesExceptSelf(nums = []) {
		    // write code here
			let lpre = 1;
			let rpre = 1;
			const leftArr = [];
			const rightArr = [];
			for (let i = 0; i < nums.length; i++) {
				const leftNow = nums[i] * lpre;
				const rightNow = nums[nums.length - 1 - i] * rpre;
				
				leftArr.push(leftNow)
				rightArr.unshift(rightNow)
				
				lpre = leftNow;
				rpre = rightNow;
			}
			
			return nums.map((v, i) => {
				if (i === 0) {
					return rightArr[i + 1]
				} else if (i === nums.length - 1) {
					return leftArr[i - 1]
				} else {
					return leftArr[i - 1] * rightArr[i + 1]
				}
			})
		}
		
		const d = [1,2,3,4];
		// const d = [-1, -1, -1, -1, -1]
		console.log(timesExceptSelf(d))
	</script>
</html>